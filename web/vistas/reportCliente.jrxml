<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="null" language="groovy" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="35614b77-acd1-4a86-a93b-4e1c2d8f616a">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString language="SQL">
		<![CDATA[SELECT 
    c.idCliente,
    c.nombre,
    c.apellido,
    c.dui,
    YEAR(cp.fecha) AS anio,
    COUNT(cp.idCuentaPago) AS totalPagos,
    (SELECT COUNT(*) 
     FROM contratos ctr2 
     WHERE ctr2.idCliente = c.idCliente) AS totalContratos
FROM 
    clientes c
INNER JOIN 
    contratos ctr ON c.idCliente = ctr.idCliente
INNER JOIN 
    cuotaPagos cp ON ctr.idContrato = cp.idContrato
GROUP BY 
    c.idCliente,
    c.nombre, 
    c.apellido,  
    c.dui, 
    YEAR(cp.fecha)
ORDER BY 
    c.nombre, anio;]]>
	</queryString>
	<field name="idCliente" class="java.lang.Integer"/>
	<field name="nombre" class="java.lang.String"/>
	<field name="apellido" class="java.lang.String"/>
	<field name="dui" class="java.lang.String"/>
	<field name="anio" class="java.lang.Integer"/>
	<field name="totalPagos" class="java.lang.Integer"/>
	<field name="totalContratos" class="java.lang.Integer"/>
	<background>
		<band/>
	</background>
	<title>
		<band height="72">
			<frame>
				<reportElement mode="Opaque" x="-20" y="-20" width="595" height="92" backcolor="#86B0D4" uuid="f4501e11-2db9-4b4f-8dcf-16dd12edcdde"/>
				<staticText>
					<reportElement x="99" y="20" width="290" height="43" forecolor="#FFFFFF" uuid="c3e0a061-1169-45ec-8ee4-5ebdc6a3e358"/>
					<textElement>
						<font size="34" isBold="true"/>
					</textElement>
					<text><![CDATA[Reporte Clientes]]></text>
				</staticText>
				<image>
					<reportElement x="452" y="6" width="83" height="79" uuid="cf7318b0-f973-473b-b67c-e4d7c5329e7e"/>
					<imageExpression><![CDATA["C:\\Users\\Jennifer Tatiana GF\\Downloads\\Logo.png"]]></imageExpression>
				</image>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band height="13"/>
	</pageHeader>
	<columnHeader>
		<band height="21">
			<line>
				<reportElement x="-20" y="20" width="595" height="1" forecolor="#666666" uuid="049479c9-a285-4439-b1ba-27522be9ea57"/>
			</line>
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="ff0f61df-17a6-4506-b5a0-f55103bab53e"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[idCliente]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="79" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="64d174ac-6fcd-492d-b60d-11f73fb25d02"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[nombre]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="158" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="d28a6093-b825-43e8-98a1-03d95f9e0fdf"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[apellido]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="237" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="e8104bdd-3b34-485e-aefa-fc325eb1a70f"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[dui]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="316" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="749184d0-05cc-4a52-9dbe-907fc970f480"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[anio]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="395" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="0bcd370d-ba5a-4836-99fa-8122e0dc1224"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[totalPagos]]></text>
			</staticText>
			<staticText>
				<reportElement mode="Opaque" x="474" y="0" width="79" height="20" forecolor="#006699" backcolor="#E6E6E6" uuid="0b61a6f0-6609-458f-aff1-0de4eea4842b"/>
				<textElement textAlignment="Center">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[totalContratos]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20">
			<line>
				<reportElement positionType="FixRelativeToBottom" x="0" y="19" width="555" height="1" uuid="6cd1997f-9ebc-4fac-805e-b0309bb8aa0b"/>
			</line>
			<textField isStretchWithOverflow="true">
				<reportElement x="0" y="0" width="79" height="20" uuid="8e045211-7ec9-4827-b6da-e6defb35e32b"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{idCliente}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="79" y="0" width="79" height="20" uuid="8057dd40-206f-4813-af97-09965405fd54"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="158" y="0" width="79" height="20" uuid="d564885a-7421-4545-88e7-4b7b636ade35"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{apellido}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="237" y="0" width="79" height="20" uuid="a86db0ab-e786-409d-8be3-e3927f8d312c"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dui}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="316" y="0" width="79" height="20" uuid="c8caf015-e98f-4981-a9de-2594778adf9a"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{anio}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="395" y="0" width="79" height="20" uuid="2f65dd19-5133-4928-99bc-02d2bc352a2e"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalPagos}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true">
				<reportElement x="474" y="0" width="79" height="20" uuid="064fe6d3-9832-4cb3-bf2d-3416d97ab7d1"/>
				<textElement>
					<font size="14"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{totalContratos}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="17">
			<textField>
				<reportElement mode="Opaque" x="0" y="4" width="515" height="13" backcolor="#E6E6E6" uuid="889e01ae-40c3-464d-b1d1-c22909f1e20f"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement mode="Opaque" x="515" y="4" width="40" height="13" backcolor="#E6E6E6" uuid="32cdb8ad-ca0c-4a06-b4cf-9f3442fd3dc1"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="4" width="100" height="13" uuid="f6d649b4-a5b9-4d1b-9fa7-52ac220af2ec"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
